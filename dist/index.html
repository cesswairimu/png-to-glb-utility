<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>png-image-to-glb-formated-file-gen</title>

		<script src="https://cdn.jsdelivr.net/npm/gltf-js-utils/dist/gltfjsutils.js"></script>
		<script src="../node_modules/jquery/dist/jquery.min.js"></script>
		<script src="../node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.min.css">

		<link rel="stylesheet" href="main.css">
		<script src="main.js"></script>
	</head>
	<body>
		<div class="container center">
			<h3>(Sample-3) PNG image to glb-formated file Generator</h3>
			<br>
			<div class="row">
				<div class="mb-3">
					<label for="formFile" class="form-label" id="img-preview">Default file input example</label>
					<input class="form-control" type="file" id="formFile" accept="image/*">
					<br>
				 <div class="invisible" id="convert-btn">
					 <button type="button" class="btn btn-secondary">Convert to glb</button>
				 </div>
				 <!-- <img class="" id="test-image" height="300" width="350" src="test.png"> -->
				 <img id="uploaded-image" height="300" width="350">
				</div>
			</div>

		
		</div>
		
	
		<script>
			
			const choseFile =  document.getElementById("formFile");
			let convertBtn = document.getElementById("convert-btn");
			let uploadedSpace =  document.getElementById("uploaded-image");
			

			choseFile.addEventListener("change", function() {
				getImgData();
			})

			function getImgData() {
				const files = choseFile.files[0];
				if (files) {
					const fileReader = new FileReader();
					fileReader.readAsDataURL(files);
					fileReader.addEventListener("load", function(){
						uploadImg = this.result;
						let url = URL.createObjectURL(files);
						uploadedSpace.src = url;
						convertBtn.classList.remove('invisible');
										});
				}

			
			}



			//---------end of image upload



			convertBtn.addEventListener("click", function(){
				createGLFTAsset(uploadedSpace);

			});


		</script>


</body>
</html>
